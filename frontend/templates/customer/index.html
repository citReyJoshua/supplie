{% extends 'sections/base.html' %}
{% block title %}
Customer Dashboard
{% endblock %}

{% block content %}

<div class="container">
  
  <div class="d-flex align-items-center justify-content-between">
      <button class="button btn-amber rounded px-2" type='button'>
      <a href='{% url 'user:registration' %}'>Add Customer</a>
      </button>
      <h1>Customer</h1>
      <div class='d-flex justify-content-end align-items-center'>
        <h6 class="mx-2">Date Range:</h6>
        <input class="input-text my-4" type="text" name="daterange" value="01/01/2020 - 12/31/2020" />
      </div>
  </div>
  <table id="example" class="table table-striped table-bordered" style="width: 100%">
    <thead>
      <tr>
        <th>Date Registered</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Birth Date</th>
        <th>City Address</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for customer in customers %}
      <tr>
        <td>{{ customer.date_registered }}</td>
        <td>{{ customer.first_name }}</td>
        <td>{{ customer.last_name }}</td>
        <td>{{ customer.birthdate }}</td>
        <td>{{ customer.city }}</td>
        <th>
          <button id="open" class="button btn-outline-primary rounded px-1"><a href="#open-modal{{ customer.id }}">View</a></button>
          <button id="delete" class="button btn-outline-danger rounded px-1"><a href="#delete-modal{{ customer.id }}">Delete</a></button>
        </th>
      </tr>
      <div id="open-modal{{ customer.id }}" class="modal-window">
        <div>
          <a href="#" title="Close" class="modal-close">Close</a>
          <h2 class='modal-head'>Customer Info</h2>
          <h4>Rey Joshua H. Macarat</h4>
          <h6>Male</h6>
          <h5>Cebu City</h5>
          <h6>04/15/1999</h6>
          <h6>09054165470</h6>
          <footer class='d-flex justify-content-end'> <button class='button btn btn-success'>Update</button></footer>
          </div>
      </div>
      
      <div id="delete-modal{{ customer.id }}" class="modal-window">
        <div class="p-0 pb-3">
          <a href="#" title="Close" class="modal-close">Close</a>
          <div class="modal-header mb-5" style="background-color: #CD5C5C !important;"><h2 style="color: whitesmoke;">Delete Entry?</h2></div>
          <footer class='d-flex justify-content-center'> <button class='button btn btn-success'>Delete</button></footer>
          </div>
      </div>
      
      <script>

        $(()=>{
          $('#delete{{ customer.id }}').click((e)=>{
            $('#delete-modal{{ customer.id }}').show()
          })
      
          $('.yes').click((e)=>{
            $('#delete-modal{{ customer.id }}').hide()
          })
        })

        $(()=>{
          $('#open{{ customer.id }}').click((e)=>{
            $('#open-modal{{ customer.id }}').show()
          })
      
          $('.yes').click((e)=>{
            $('#open-modal{{ customer.id }}').hide()
          })
        })
        
      </script>
      

      {% endfor %}
      
    </tbody>
    <tfoot>
      <tr>
        <th>Date Registered</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Birth Date</th>
        <th>City Address</th>
        <th></th>
      </tr>
    </tfoot>
  </table>
</div>



<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.js" integrity="sha512-WNLxfP/8cVYL9sj8Jnp6et0BkubLP31jhTG9vhL/F5uEZmg5wEzKoXp1kJslzPQWwPT1eyMiSxlKCgzHLOTOTQ==" crossorigin="anonymous"></script>

{% endblock %}
